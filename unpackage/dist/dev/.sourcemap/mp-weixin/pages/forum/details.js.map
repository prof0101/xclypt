{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/forum/details.vue?3917","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/forum/details.vue?b597","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/forum/details.vue?a529","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/forum/details.vue?9349","uni-app:///pages/forum/details.vue","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/forum/details.vue?e915","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/forum/details.vue?e9d9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","components","bar_title","div_forum","list_comment","data","url_get_obj","field","query","forum_id","obj","display","user_id","nickname","hits","title","keywords","description","url","tag","img","content","create_time","update_time","avatar","type","praise_len","form","form_comment","source_table","source_field","source_id","reply_to_id","methods","onEditorReady","uni","createSelectorQuery","select","context","html","success","fail","exec","get_comment","orderby","o","add_reply","idx","resolve","editorChange","get_obj_after","add_hits","onLoad"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACqC;;;AAG3F;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAuyB,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC2C3zB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;QACAD;QACAE;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAtB;MACAuB;QACAN;MACA;MACAO;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;MACAC,IACAC,sBACAC,kBACAC;QACA;QACA;UACAC;UACAC;UACAC;QACA;MACA,GACAC;IACA;IACA;IACAC;MAAA;MACA;MACA;QACAd;QACAC;QACAC;QACAa;QACAZ;MACA;MACA;QACA;UACA;UACA5B;YACAyC;UACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MAAA;MACA;QAAA,2BACAC;UACA;UACA,YACA,2BACA;YACAlB;YACAC;YACAC;YACAa;YACAZ;UACA,GACA;YACA;cACAtB;YACA;UACA,EACA;QAAA;QAhBA;UAAA;QAiBA;QACAsC;MACA;IACA;IACAC;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA,WACA,4CACA;QACArC;MACA,GACA;QACAJ;MACA,EACA;IACA;EACA;EACA0C;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxLA;AAAA;AAAA;AAAA;AAAgqC,CAAgB,0nCAAG,EAAC,C;;;;;;;;;;;ACAprC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/forum/details.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/forum/details.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./details.vue?vue&type=template&id=d21c44aa&scoped=true&\"\nvar renderjs\nimport script from \"./details.vue?vue&type=script&lang=js&\"\nexport * from \"./details.vue?vue&type=script&lang=js&\"\nimport style0 from \"./details.vue?vue&type=style&index=0&id=d21c44aa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d21c44aa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/forum/details.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=template&id=d21c44aa&scoped=true&\"","var components\ntry {\n  components = {\n    uniCard: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-card/uni-card\" */ \"@/components/uni-card/uni-card.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$check_action(\"/forum/details\", \"get\")\n  var m1 = m0 ? _vm.$check_action(\"/comment/list\", \"get\") : null\n  var m2 = m0 && m1 ? _vm.$check_action(\"/comment/list\", \"get\") : null\n  var m3 = m0 ? _vm.$check_action(\"/comment/list\", \"add\") : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page_forum\" id=\"forum_details\">\n    <template v-if=\"$check_action('/forum/details', 'get')\">\n      <!-- 论坛详情模块(开始) -->\n      <div_forum\n        :obj=\"obj\"\n        style=\"background-color: #fff\"\n        class=\"mb\"\n      ></div_forum>\n      <!-- 论坛详情模块(结束) -->\n\n      <!-- 评论列表(开始) -->\n      <uni-card title=\"文章点评\" v-if=\"$check_action('/comment/list', 'get')\">\n        <list_comment\n          v-if=\"$check_action('/comment/list', 'get')\"\n          style=\"background-color: #fff\"\n          :list=\"list_comment\"\n          :obj=\"form_comment\"\n        ></list_comment>\n      </uni-card>\n\n      <!-- 评论列表(结束) -->\n      <!-- 发表评论模块(开始) -->\n      <template class=\"\" v-if=\"$check_action('/comment/list', 'add')\">\n        <navigator\n          style=\"background-color: #fff\"\n          class=\"link\"\n          :url=\"\n            '/pages/comment/edit?source_table=forum&source_field=forum_id&source_id=' +\n            obj.forum_id\n          \"\n          >我来评论</navigator\n        >\n      </template>\n      <!-- 发表评论模块(结束) -->\n    </template>\n  </view>\n</template>\n\n<script>\nimport bar_title from '@/components/diy/bar_title.vue'\nimport div_forum from '@/components/diy/div_forum.vue'\nimport list_comment from '@/components/diy/list_comment.vue'\nimport mixin from '@/libs/mixins/page.js'\nexport default {\n  mixins: [mixin],\n  components: {\n    bar_title,\n    div_forum,\n    list_comment,\n  },\n  data() {\n    return {\n      url_get_obj: '~/api/forum/get_obj?',\n      field: 'forum_id',\n      query: {\n        forum_id: 0,\n      },\n      obj: {\n        forum_id: 0,\n        display: 0,\n        user_id: 0,\n        nickname: '',\n        hits: 0,\n        title: '',\n        keywords: '',\n        description: '',\n        url: '',\n        tag: '',\n        img: '',\n        content: '',\n        create_time: '',\n        update_time: '',\n        avatar: '',\n        type: '',\n        praise_len: 0,\n      },\n      list_comment: [],\n      form: {\n        content: '',\n      },\n      form_comment: {\n        source_table: 'forum',\n        source_field: 'forum_id',\n        source_id: 0,\n        reply_to_id: 0,\n      },\n    }\n  },\n  methods: {\n    onEditorReady() {\n      const that = this\n      uni\n        .createSelectorQuery()\n        .select('#editor')\n        .context((res) => {\n          this.editorCtx = res.context\n          this.editorCtx.setContents({\n            html: this.form.content,\n            success: (res) => {},\n            fail: (res) => {},\n          })\n        })\n        .exec()\n    },\n    // 获取评论\n    get_comment() {\n      var options = getCurrentPages()[getCurrentPages().length - 1].options\n      var query = {\n        source_table: 'forum',\n        source_field: 'forum_id',\n        source_id: options.forum_id,\n        orderby: 'create_time desc',\n        reply_to_id: '0',\n      }\n      this.$get('~/api/comment/get_list?', query, (json) => {\n        if (json.result) {\n          var list_comment = json.result.list\n          list_comment.map((o) => {\n            o.list_reply = []\n          })\n          this.add_reply(list_comment).then((list) => {\n            this.list_comment = list\n          })\n        }\n      })\n    },\n    /**\n     * @param { Array } list 评论列表\n     * 添加回复到评论列表\n     */\n    add_reply(list) {\n      return new Promise((resolve) => {\n        for (let idx = 0; idx < list.length; idx++) {\n          const obj = list[idx]\n          this.$get(\n            '~/api/comment/get_list?',\n            {\n              source_table: 'forum',\n              source_field: 'forum_id',\n              source_id: obj.forum_id,\n              orderby: 'create_time desc',\n              reply_to_id: obj.comment_id,\n            },\n            (res) => {\n              if (res.result) {\n                obj.list_reply = res.result.list\n              }\n            }\n          )\n        }\n        resolve(list)\n      }).catch((e) => {})\n    },\n    editorChange: function (e) {\n      this.gongsijieshao = e.detail.html\n    },\n    /**\n     * 获取对象之后\n     * @param {Object} json 结果对象\n     */\n    get_obj_after(json) {\n      this.add_hits(this.obj)\n      this.get_comment(this.obj)\n      this.form_comment.source_id = this.obj.article_id\n    },\n    /**\n     * 添加访问量\n     */\n    add_hits(obj) {\n      this.$post(\n        '~/api/forum/set?forum_id=' + obj.forum_id,\n        {\n          hits: obj.hits + 1,\n        },\n        (res) => {\n          obj.hits += 1\n        }\n      )\n    },\n  },\n  onLoad() {\n    this.get_comment()\n  },\n}\n</script>\n\n<style scoped>\n.page_forum {\n  background: #f7f7f7;\n  padding-bottom: 1rem;\n}\n\n.bar_title {\n  background: none;\n}\n\n.recommend {\n  margin: 0.5rem;\n  background: #fff;\n  border-radius: 0.5rem;\n  overflow: hidden;\n}\n\n.link {\n  text-align: center;\n  padding: 0.5rem 0;\n  border: 1px solid #dbdbdb;\n  border-radius: 0.5rem;\n}\n</style>\n","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=style&index=0&id=d21c44aa&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=style&index=0&id=d21c44aa&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716129031423\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}