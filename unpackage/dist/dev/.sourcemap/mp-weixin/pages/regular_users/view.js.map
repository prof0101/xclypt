{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/regular_users/view.vue?8400","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/regular_users/view.vue?02b1","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/regular_users/view.vue?4074","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/regular_users/view.vue?b3d2","uni-app:///pages/regular_users/view.vue","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/regular_users/view.vue?e6f1","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/regular_users/view.vue?93d8"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","data","field_user","url_add_user","url_set_user","url_get_obj_user","url_upload_user","form_user","user_id","username","nickname","password","avatar","email","user_group","state","vip_level","vip_discount","obj_user","query_user","list_state","value","text","list_user_state","group_table","is_password","field","url_add","url_set","url_get_obj","url_upload","user_name","mobile_phone_number","query","regular_users_id","form","disabledObj","user_name_isDisabled","mobile_phone_number_isDisabled","created","methods","submit_check","param","changeLog","uploadFile_","uni","count","success","successChoose","url","filePath","name","title","icon","close_","submit_","change_file","sizeType","sourceType","formData","i_want_to_customize","header","_self","uploadTask","console","error","change_img","get_obj_before","arr","get_obj_after","change_avatar","submit","pm","msg","ret","email_regular","confirm_password","p","form_sub","mobile_phone_number_phone_regular","method","q","_this","json","delta","bl"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,aAAa,wRAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxGA;AAAA;AAAA;AAAA;AAAoyB,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC8JxzB;AAAA;AAAA,eACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACA;QACAC;QACAC;QACA;QACA;QACAC;QACAC;QACAC;MACA;MACAC;QACAV;QACAC;QACAC;QACAC;QACAC;QACA;QACAC;QACAC;QACA;QACA;QACAC;QACAC;QACAC;MACA;MACAE;QACAX;MACA;MACAY,aACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MAEAC,kBACA;QAAAF;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAE;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MAEAC;QACAJ;QAAA;QACAC;QAAA;QACAxB;QACA0B;MACA;;MACAE;QACAC;QACAC;MACA;IACA;EACA;EACAC;EACAC;IACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA,wCACA;MACA,IACAC,6BACA,oEACA;QACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IACAC;MAAA;MAEA,IACAC,sDACAA,gDACA;QACAA;UACAC;UACAC;YACA;YACA;UACA;QACA;MACA;QACApD;UACAmD;UACAC;YACA;YACA;UACA;QACA;MACA;IAEA;IACAC;MAAA;MACAH;QACAI;QAAA;QACAC;QACAC;QACAJ;UACA;YACAF;cACAO;cACAC;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA,mCACA;IACA;IACAC;MACA;MACA,0CACA;MAEA;IACA;IACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACAX;QACAC;QACAW;QAAA;QACAC;QAAA;QACAX;UACA;UACA;YACAE;YACAC;YACAC;YACAQ;cACAC;YACA;YACAC;cACA;YACA;YACAd;cACA;cACAe;YACA;UACA;UAEAC;YACAD;YAEAE,YACA,8CACA;UACA;QACA;QACAC;MACA;IACA;IACA;AACA;AACA;AACA;IACAC;MACA;MACAJ;MACA;MACAjB;QACAC;QACAW;QAAA;QACAC;QAAA;QACAX;UACA;UACA;YACAE;YACAC;YACAC;YACAQ;cACAC;YACA;YACAC;cACA;YACA;YACAd;cACA;cACAe;YACA;UACA;UAEAC;YACAD;YAEAE,YACA,8CACA;UACA;QACA;QACAC;MACA;IACA;IACA;AACA;AACA;AACA;AACA;IACAE;MACA;MACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;QACAC;MACA;MACA;QACA;MACA;MACAvB;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;IACAwB;MAAA;MACA;MACA;QAAA7D;MAAA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,uBACA;MACA;IACA;IACA;AACA;AACA;AACA;IACA8D;MACA;MACAR;MACA;MACAjB;QACAC;QACAW;QAAA;QACAC;QAAA;QACAX;UACA;UACA;YACAE;YACAC;YACAC;YACAQ;cACAC;YACA;YACAC;cACA;YACA;YACAd;cACA;cACAe;YACA;UACA;UAEAC;YACAD;YAEAE,YACA,8CACA;UACA;QACA;QACAC;MACA;IACA;IACAM;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;kBACA7B;gBACA;gBACA8B;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBAEA;kBACA;gBACA;kBACAC;gBACA;gBAAA,iCACAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EAAA,iFAGAhC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cACAgC;cAEAC,sEACA;cAEA;cACAlE;cAEAmE;cAEAZ,YACA,uDACAvD,UACAE,UACAE,OACAH,UACAI,WACA;cAEA;gBACA4D;cACA;gBACAA;cACA;gBACAA;cACA,WACA,uBACA/D,8CACA;gBACA+D;cACA;gBACAA;cACA;gBACAA;cACA;cACA;cACA;cACA;cAAA,KACA;gBACAA;cACA;cAEAG;gBAAApE;cAAA;cAEAqE;cACAC,oCACA;cAAA,MAEAD,gCACA;gBAAA;gBAAA;cAAA;cAAA,kCAEA;YAAA;cAAA,kCAGAJ;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA,gFAEAhC;IACA;IACA;MACA;QACA;QACA;UACA;YACAsC;UACA;UACAC;UACAhC;QACA;UACAA;QACA;MACA;QACAA;MACA;IACA;MACAA;IACA;MACA;MACA;QACAA;MACA;QACAA;MACA;IACA;;IAEA;IACA;MACA;MACA,WACA,mCACAP,OACA;QACA;UACAwC;QACA;UACAA;QACA;UACAA;QACA;MACA,EACA;IACA;EACA,kFAGAC;IACA;IAEA;EACA,kFAOAhD;IAAA;IACA;IACA;IACA;IACA;MACA;QACAA;QACA;MACA;QACA6B;QACA;MACA;IACA;EACA,8EAEAc;IAAA;IACA;MACA;MACA,WACA,WACA,mBACA,2BACAA,8BACAA,UACA;QACA;UACA;UACAjC;YACAuC;UACA;QACA;UACApB;UACA;QACA;MACA,EACA;IACA;MACA;MACA;QACA;UACA;UACAnB;YACAuC;UACA;QACA;UACA;UACA;YAAA5E;UAAA;UACAwD;UACA;QACA;MACA;IACA;EACA,0EAEA;IACA;IAEA;MACAqB;MACArB,YACAqB,qCACA;IACA;IACA;MACAA;MACArB,YACAqB,qCACA;IACA;IACA;MACAA;MACArB,YACAqB,qCACA;IACA;IACA;MACAA;MACArB,YACAqB,qCACA;IACA;IACA;MACAA;MACArB,YACAqB,qCACA;IACA;IAEArB,YACAqB,KACA,+BACA,kCACA;IAEA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;ACtsBA;AAAA;AAAA;AAAA;AAA6pC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACAjrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/regular_users/view.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/regular_users/view.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./view.vue?vue&type=template&id=d7e7b0f0&scoped=true&\"\nvar renderjs\nimport script from \"./view.vue?vue&type=script&lang=js&\"\nexport * from \"./view.vue?vue&type=script&lang=js&\"\nimport style0 from \"./view.vue?vue&type=style&index=0&id=d7e7b0f0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d7e7b0f0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/regular_users/view.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./view.vue?vue&type=template&id=d7e7b0f0&scoped=true&\"","var components\ntry {\n  components = {\n    uniForms: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-forms/uni-forms\" */ \"@/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-forms-item/uni-forms-item\" */ \"@/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-easyinput/uni-easyinput\" */ \"@/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniDataSelect: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-data-select/uni-data-select\" */ \"@/components/uni-data-select/uni-data-select.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.is_view()\n  var m1 =\n    m0 && _vm.form_user[\"avatar\"] ? _vm.$fullUrl(_vm.form_user[\"avatar\"]) : null\n  var m2 = m0\n    ? _vm.$check_field(\"get\", \"user_name\") ||\n      _vm.$check_field(\"add\", \"user_name\") ||\n      _vm.$check_field(\"set\", \"user_name\")\n    : null\n  var m3 =\n    m0 && m2\n      ? _vm.user_group === \"管理员\" ||\n        (_vm.form[\"regular_users_id\"] &&\n          _vm.$check_field(\"set\", \"user_name\")) ||\n        (!_vm.form[\"regular_users_id\"] && _vm.$check_field(\"add\", \"user_name\"))\n      : null\n  var m4 = m0 && m2 && !m3 ? _vm.$check_field(\"get\", \"user_name\") : null\n  var m5 = m0\n    ? _vm.$check_field(\"get\", \"mobile_phone_number\") ||\n      _vm.$check_field(\"add\", \"mobile_phone_number\") ||\n      _vm.$check_field(\"set\", \"mobile_phone_number\")\n    : null\n  var m6 =\n    m0 && m5\n      ? _vm.user_group === \"管理员\" ||\n        (_vm.form[\"regular_users_id\"] &&\n          _vm.$check_field(\"set\", \"mobile_phone_number\")) ||\n        (!_vm.form[\"regular_users_id\"] &&\n          _vm.$check_field(\"add\", \"mobile_phone_number\"))\n      : null\n  var m7 =\n    m0 && m5 && !m6 ? _vm.$check_field(\"get\", \"mobile_phone_number\") : null\n  var m8 =\n    _vm.$check_action(\"/regular_users/view\", \"set\") ||\n    _vm.$check_action(\"/regular_users/view\", \"add\") ||\n    _vm.$check_option(\"/regular_users/table\", \"examine\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n        m8: m8,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./view.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./view.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <view class=\"container diy_view\">\n      <view>\n        <view>\n          <view class=\"\">\n            <uni-forms :modelValue=\"form\" v-if=\"is_view()\">\n              <uni-forms-item label=\"头像\" name=\"avatar\">\n                <view class=\"diy_field diy_img\" v-if=\"form_user['avatar']\">\n                  <image\n                    :src=\"$fullUrl(form_user['avatar'])\"\n                    @click=\"change_avatar()\"\n                  />\n                </view>\n                <view\n                  class=\"diy_field diy_img\"\n                  v-else-if=\"!form_user['avatar']\"\n                >\n                  <view class=\"btn_add_img\" @click=\"change_avatar()\">\n                    <text>+</text>\n                  </view>\n                </view>\n                <uni-icons\n                  style=\"display: none\"\n                  class=\"forward\"\n                  type=\"forward\"\n                  id=\"form_user_img_avatar\"\n                ></uni-icons>\n              </uni-forms-item>\n\n              <uni-forms-item label=\"账号\" name=\"username\">\n                <span v-if=\"obj_user.username\">{{ obj_user.username }}</span>\n                <uni-easyinput\n                  v-else\n                  type=\"text\"\n                  v-model=\"form_user.username\"\n                  placeholder=\"请输入账号\"\n                />\n              </uni-forms-item>\n\n              <uni-forms-item\n                v-if=\"!obj_user.password\"\n                label=\"密码\"\n                name=\"password\"\n              >\n                <uni-easyinput\n                  type=\"password\"\n                  v-model=\"form_user.password\"\n                  placeholder=\"请输入密码\"\n                />\n              </uni-forms-item>\n\n              <uni-forms-item label=\"昵称\" name=\"nickname\">\n                <uni-easyinput\n                  type=\"text\"\n                  v-model=\"form_user.nickname\"\n                  placeholder=\"请输入昵称\"\n                />\n              </uni-forms-item>\n\n              <uni-forms-item label=\"邮箱\" name=\"email\">\n                <uni-easyinput\n                  type=\"text\"\n                  v-model=\"form_user.email\"\n                  placeholder=\"请输入邮箱\"\n                />\n              </uni-forms-item>\n\n              <uni-forms-item label=\"状态\" name=\"state\">\n                <uni-data-select\n                  v-model=\"form_user.state\"\n                  :localdata=\"list_user_state\"\n                  :disabled=\"user_group !== '管理员'\"\n                ></uni-data-select>\n              </uni-forms-item>\n\n              <uni-forms-item\n                v-if=\"\n                  $check_field('get', 'user_name') ||\n                  $check_field('add', 'user_name') ||\n                  $check_field('set', 'user_name')\n                \"\n                label=\"用户姓名\"\n                name=\"user_name\"\n              >\n                <uni-easyinput\n                  type=\"text\"\n                  v-model=\"form['user_name']\"\n                  v-if=\"\n                    user_group === '管理员' ||\n                    (form['regular_users_id'] &&\n                      $check_field('set', 'user_name')) ||\n                    (!form['regular_users_id'] &&\n                      $check_field('add', 'user_name'))\n                  \"\n                  :disabled=\"disabledObj['user_name_isDisabled']\"\n                />\n                <!-- 仅查看 -->\n                <text v-else-if=\"$check_field('get', 'user_name')\">\n                  {{ form['user_name'] }}\n                </text>\n              </uni-forms-item>\n              <uni-forms-item\n                v-if=\"\n                  $check_field('get', 'mobile_phone_number') ||\n                  $check_field('add', 'mobile_phone_number') ||\n                  $check_field('set', 'mobile_phone_number')\n                \"\n                label=\"手机号码\"\n                name=\"mobile_phone_number\"\n              >\n                <uni-easyinput\n                  type=\"number\"\n                  v-model=\"form['mobile_phone_number']\"\n                  v-if=\"\n                    user_group === '管理员' ||\n                    (form['regular_users_id'] &&\n                      $check_field('set', 'mobile_phone_number')) ||\n                    (!form['regular_users_id'] &&\n                      $check_field('add', 'mobile_phone_number'))\n                  \"\n                  :disabled=\"disabledObj['mobile_phone_number_isDisabled']\"\n                />\n                <!-- 仅查看 -->\n                <text v-else-if=\"$check_field('get', 'mobile_phone_number')\">\n                  {{ form['mobile_phone_number'] }}\n                </text>\n              </uni-forms-item>\n            </uni-forms>\n            <view\n              class=\"form_button\"\n              v-if=\"\n                $check_action('/regular_users/view', 'set') ||\n                $check_action('/regular_users/view', 'add') ||\n                $check_option('/regular_users/table', 'examine')\n              \"\n            >\n              <button\n                size=\"mini\"\n                type=\"primary\"\n                @click=\"submit_()\"\n                class=\"primary_btn\"\n              >\n                提交\n              </button>\n              <button size=\"mini\" @click=\"cancel()\">取消</button>\n            </view>\n            <view class=\"form_button\" v-else>\n              <button size=\"mini\" @click=\"cancel()\">返回</button>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport mixin from '@/libs/mixins/page.js'\nexport default {\n  mixins: [mixin],\n  data() {\n    return {\n      field_user: 'user_id',\n      url_add_user: '~/api/user/register?',\n      url_set_user: '~/api/user/set?',\n      url_get_obj_user: '~/api/user/get_obj?',\n      url_upload_user: '~/api/user/upload?',\n      form_user: {\n        user_id: 0,\n        username: '',\n        nickname: '',\n        password: '',\n        avatar: '',\n        // phone: '',\n        email: '',\n        user_group: '普通用户',\n        // phone_state: 0,\n        // email_state: 0,\n        state: 1,\n        vip_level: '',\n        vip_discount: 0,\n      },\n      obj_user: {\n        user_id: 0,\n        username: '',\n        nickname: '',\n        password: '',\n        avatar: '',\n        // phone: '',\n        email: '',\n        user_group: '普通用户',\n        // phone_state: 0,\n        // email_state: 0,\n        state: 1,\n        vip_level: '',\n        vip_discount: 0,\n      },\n      query_user: {\n        user_id: 0,\n      },\n      list_state: [\n        { value: 0, text: '未认证' },\n        { value: 1, text: '审核中' },\n        { value: 2, text: '已认证' },\n      ],\n\n      list_user_state: [\n        { value: 1, text: '可用' },\n        { value: 2, text: '异常' },\n        { value: 3, text: '已冻结' },\n        { value: 4, text: '已注销' },\n      ],\n      group_table: 'regular_users',\n      is_password: true,\n      field: 'regular_users_id',\n      url_add: '~/api/regular_users/add?',\n      url_set: '~/api/regular_users/set?',\n      url_get_obj: '~/api/regular_users/get_obj?',\n      url_upload: '~/api/regular_users/upload?',\n      user_name: null,\n      mobile_phone_number: null,\n      query: {\n        regular_users_id: 0,\n      },\n\n      form: {\n        user_name: '', // 用户姓名\n        mobile_phone_number: '', // 手机号码\n        user_id: 0,\n        regular_users_id: 0, // ID\n      },\n      disabledObj: {\n        user_name_isDisabled: false,\n        mobile_phone_number_isDisabled: false,\n      },\n    }\n  },\n  created() {},\n  methods: {\n    /**\n     * 提交前验证事件\n     * @param {Object}\n请求参数\n     * @return {String} 验证成功返回null, 失败返回错误提示\n     */\n    submit_check(param) {\n      let mobile_phone_number_phone_regular =\n        /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/\n      if (\n        param.mobile_phone_number &&\n        !mobile_phone_number_phone_regular.test(param.mobile_phone_number)\n      ) {\n        return '手机号格式错误'\n      }\n      return null\n    },\n\n    changeLog(v, value) {\n      this.form[value] = v\n    },\n    uploadFile_(type) {\n      // #ifdef !APP-VUE\n      if (\n        uni.getSystemInfoSync().uniPlatform != 'mp-weixin' ||\n        uni.getSystemInfoSync().platform == 'devtools'\n      ) {\n        uni.chooseImage({\n          count: 1,\n          success: (chooseImageRes) => {\n            const tempFilePaths = chooseImageRes.tempFilePaths\n            this.successChoose(tempFilePaths[0], type)\n          },\n        })\n      } else {\n        wx.chooseMessageFile({\n          count: 1,\n          success: (chooseImageRes) => {\n            const tempFilePaths = chooseImageRes.tempFiles\n            this.successChoose(tempFilePaths[0].path, type)\n          },\n        })\n      }\n      // #endif\n    },\n    successChoose(filePath, type) {\n      uni.uploadFile({\n        url: getApp().globalData.host + '/api/regular_users/upload', //仅为示例，非真实的接口地址\n        filePath,\n        name: 'file',\n        success: (uploadFileRes) => {\n          if (uploadFileRes.data.error) {\n            uni.showToast({\n              title: uploadFileRes.data.error.message,\n              icon: 'none',\n            })\n          } else {\n            this[type] = JSON.parse(uploadFileRes.data).result.url\n          }\n        },\n      })\n    },\n    close_(type) {\n      if (type == 'user_name') this['user_name'] = this.form['user_name'] = ''\n      if (type == 'mobile_phone_number')\n        this['mobile_phone_number'] = this.form['mobile_phone_number'] = ''\n    },\n    submit_() {\n      if (this['user_name'] !== null) this.form['user_name'] = this['user_name']\n      if (this['mobile_phone_number'] !== null)\n        this.form['mobile_phone_number'] = this['mobile_phone_number']\n\n      this.submit()\n    },\n    /**\n     * 上传文件\n     * @param {Object} param文件参数\n     */\n    change_file(key_name) {\n      var _self = this\n      // 选择图像方法\n      uni.chooseFile({\n        count: 1,\n        sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'], //从相册选择\n        success: function (res) {\n          const tempFilePaths = res.tempFilePaths\n          const uploadTask = uni.uploadFile({\n            url: _self.$fullUrl('/api/regular_users/upload?'),\n            filePath: tempFilePaths[0],\n            name: 'file',\n            formData: {\n              i_want_to_customize: 'test',\n            },\n            header: {\n              'x-auth-token': _self.$store.state.user.token,\n            },\n            success: function (uploadFileRes) {\n              var filename = JSON.parse(uploadFileRes.data).result.url\n              _self.form[key_name] = filename\n            },\n          })\n\n          uploadTask.onProgressUpdate(function (res) {\n            _self.percent = res.progress\n\n            console.log(\n              '预期需要上传的数据总长度' + res.totalBytesExpectedToSend\n            )\n          })\n        },\n        error: function (e) {},\n      })\n    },\n    /**\n     * 上传图片\n     * @param {Object} param文件参数\n     */\n    change_img(key_name) {\n      var _self = this\n      _self.upload_img_flag = false\n      // 选择图像方法\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'], //从相册选择\n        success: function (res) {\n          const tempFilePaths = res.tempFilePaths\n          const uploadTask = uni.uploadFile({\n            url: _self.$fullUrl('/api/regular_users/upload?'),\n            filePath: tempFilePaths[0],\n            name: 'file',\n            formData: {\n              i_want_to_customize: 'test',\n            },\n            header: {\n              'x-auth-token': _self.$store.state.user.token,\n            },\n            success: function (uploadFileRes) {\n              var filename = JSON.parse(uploadFileRes.data).result.url\n              _self.form[key_name] = filename\n            },\n          })\n\n          uploadTask.onProgressUpdate(function (res) {\n            _self.percent = res.progress\n\n            console.log(\n              '预期需要上传的数据总长度' + res.totalBytesExpectedToSend\n            )\n          })\n        },\n        error: function (e) {},\n      })\n    },\n    /**\n     * 获取对象后获取缓存表单\n     * @param {Object} json\n     * @param {Object} func\n     */\n    get_obj_before(param) {\n      var form = uni.db.get('form')\n      if (form) {\n        delete form.examine_state\n        delete form.examine_reply\n        this.obj = uni.push(this.obj, form)\n        this.form = uni.push(this.form, form)\n      }\n      var arr = []\n      for (let key in form) {\n        arr.push(key)\n      }\n      for (var i = 0; i < arr.length; i++) {\n        this.disabledObj[arr[i] + '_isDisabled'] = true\n      }\n      uni.db.del('form')\n      return param\n    },\n\n    /**\n     * 获取对象之后\n     * @param {Object} json\n     * @param {Object} func\n     */\n    get_obj_after(json, func) {\n      let user_id = this.form.user_id\n      this.$get('~/api/user/get_obj?', { user_id }, (res) => {\n        if (res.result && res.result.obj) {\n          let o = res.result.obj\n          delete o['create_time']\n          delete o['login_time']\n          this.form_user = o\n          this.obj_user = o\n          this.is_password = this.obj_user.password ? false : true\n          this.query_user.user_id = user_id\n        } else if (res.error) {\n        }\n      })\n    },\n    /**\n     * 修改头像\n     * @param {Object} param文件参数\n     */\n    change_avatar() {\n      var _self = this\n      _self.upload_img_flag = false\n      // 选择图像方法\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'], //从相册选择\n        success: function (res) {\n          const tempFilePaths = res.tempFilePaths\n          const uploadTask = uni.uploadFile({\n            url: _self.$fullUrl('/api/user/upload?'),\n            filePath: tempFilePaths[0],\n            name: 'file',\n            formData: {\n              i_want_to_customize: 'test',\n            },\n            header: {\n              'x-auth-token': _self.$store.state.user.token,\n            },\n            success: function (uploadFileRes) {\n              var filename = JSON.parse(uploadFileRes.data).result.url\n              _self.form_user.avatar = filename\n            },\n          })\n\n          uploadTask.onProgressUpdate(function (res) {\n            _self.percent = res.progress\n\n            console.log(\n              '预期需要上传的数据总长度' + res.totalBytesExpectedToSend\n            )\n          })\n        },\n        error: function (e) {},\n      })\n    },\n    async submit(param, func) {\n      if (!param) {\n        param = this.form_user\n      }\n      var pm = this.events('submit_before', Object.assign({}, param)) || param\n      var msg = await this.events('submit_check', pm)\n      var ret\n      if (msg) {\n        this.$toast(msg, 'danger')\n      } else {\n        ret = this.events('submit_main', pm, func)\n      }\n      return ret\n    },\n\n    // 提交前校验\n    async submit_check(param) {\n      var ret = null\n\n      var email_regular = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\n      // var phone_regular = /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/;\n\n      // var {username ,password ,nickname ,user_group ,email ,phone} = param;\n      var { username, password, nickname, user_group, email } = param\n\n      var confirm_password = this.confirm_password\n\n      console.log(\n        '表单校验username ,password ,email ,nickname ,user_group',\n        username,\n        password,\n        email,\n        nickname,\n        user_group\n      )\n\n      if (!username) {\n        ret = '账号不能为空'\n      } else if (username.length > 16 || username.length < 5) {\n        ret = '账号长度应为5到16个字符之间！'\n      } else if (!password) {\n        ret = '密码不能为空!'\n      } else if (\n        this.is_password &&\n        (password.length > 16 || password.length < 5)\n      ) {\n        ret = '密码长度应为5到16个字符之间！'\n      } else if ((nickname && nickname.length > 12) || nickname.length < 2) {\n        ret = '昵称长度应为2个字符到12个字符之间'\n      } else if (email && !email_regular.test(email)) {\n        ret = '请输入正确的邮箱地址 例：test@test.com!'\n      }\n      // else if(phone && !phone_regular.test(phone)){\n      //   ret = \"请输入正确的手机号码 例：18955552312!\";\n      // }\n      else if (!user_group) {\n        ret = '请选择用户组!'\n      }\n\n      var p = { username: param.username }\n\n      let form_sub = Object.assign({}, this.form)\n      let mobile_phone_number_phone_regular =\n        /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/\n      if (\n        form_sub.mobile_phone_number &&\n        !mobile_phone_number_phone_regular.test(form_sub.mobile_phone_number)\n      ) {\n        return '手机号格式错误'\n      }\n\n      return ret\n    },\n\n    submit_main(param, func) {\n      var url = this.url\n      if (url) {\n        if (this.field_user) {\n          var id = param[this.field_user]\n          if (id) {\n            var q = {\n              method: 'set',\n            }\n            q[this.field_user] = id\n            url = this.toUrl(q, url)\n          } else {\n            url += 'method=add'\n          }\n        } else {\n          url += 'method=submit'\n        }\n      } else if (this.url_submit) {\n        url = this.url_submit\n      } else if (this.field_user) {\n        var id = param[this.field_user]\n        if (id) {\n          url = this.url_set_user\n        } else {\n          url = this.url_add_user\n        }\n      }\n\n      //\n      if (url) {\n        var _this = this\n        this.$post(\n          this.$toUrl(this.query_user, url),\n          param,\n          function (json, status) {\n            if (json.result) {\n              _this.events('submit_after', json, func)\n            } else if (json.error) {\n              _this.$toast(json.error.message, 'danger')\n            } else {\n              _this.$toast('服务器连接失败！', 'danger')\n            }\n          }\n        )\n      }\n    },\n\n    // 提交成功后\n    submit_after(json, func) {\n      var form = Object.assign({}, this.form_user)\n\n      this.get_register(form)\n    },\n\n    /**\n     * 获取注册表信息\n     * @param {Object} form\n     * @param {Object} table\n     */\n    get_register(form) {\n      var form = this.form\n      var form_user = this.form_user\n      delete form_user.password\n      this.$get('~/api/user/get_obj?', form_user, (res) => {\n        if (res.result && res.result.obj) {\n          form.user_id = res.result.obj.user_id\n          this.submit_sub(form)\n        } else if (res.error) {\n          console.error(res.error)\n          this.$toast(res.error.message, 'error')\n        }\n      })\n    },\n\n    submit_sub(form_sub) {\n      if (form_sub['regular_users_id']) {\n        // 提交事件\n        this.$post(\n          '~/api/' +\n            this.group_table +\n            '/set?regular_users_id=' +\n            form_sub['regular_users_id'],\n          form_sub,\n          (res) => {\n            if (res.result) {\n              this.$toast('修改成功!', 'success')\n              uni.navigateBack({\n                delta: 1,\n              })\n            } else if (res.error) {\n              console.error(res.error)\n              this.$toast(res.error.message, 'error')\n            }\n          }\n        )\n      } else {\n        // 提交事件\n        this.$post('~/api/' + this.group_table + '/add?', form_sub, (res) => {\n          if (res.result) {\n            this.$toast('添加成功!', 'success')\n            uni.navigateBack({\n              delta: 1,\n            })\n          } else if (res.error) {\n            var user_id = form_sub['user_id']\n            this.$get('~/api/user/del?', { user_id })\n            console.error(res.error)\n            this.$toast(res.error.message, 'error')\n          }\n        })\n      }\n    },\n\n    is_view() {\n      var bl = this.user_group == '管理员'\n\n      if (!bl) {\n        bl = this.$check_action('/regular_users/table', 'add')\n        console.log(\n          bl ? '你有表格添加权限视作有添加权限' : '你没有表格添加权限'\n        )\n      }\n      if (!bl) {\n        bl = this.$check_action('/regular_users/table', 'set')\n        console.log(\n          bl ? '你有表格添加权限视作有修改权限' : '你没有表格修改权限'\n        )\n      }\n      if (!bl) {\n        bl = this.$check_action('/regular_users/view', 'add')\n        console.log(\n          bl ? '你有视图添加权限视作有添加权限' : '你没有视图添加权限'\n        )\n      }\n      if (!bl) {\n        bl = this.$check_action('/regular_users/view', 'set')\n        console.log(\n          bl ? '你有视图修改权限视作有修改权限' : '你没有视图修改权限'\n        )\n      }\n      if (!bl) {\n        bl = this.$check_action('/regular_users/view', 'get')\n        console.log(\n          bl ? '你有视图查询权限视作有查询权限' : '你没有视图查询权限'\n        )\n      }\n\n      console.log(\n        bl\n          ? '具有当前页面的查看权，请注意这不代表你有字段的查看权'\n          : '无权查看当前页，请注意即便有字段查询权限没有页面查询权限也不行'\n      )\n\n      return bl\n    },\n  },\n}\n</script>\n\n<style scoped>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.form_button {\n  padding-bottom: 15px;\n  display: flex;\n}\n.form_button button {\n  width: 40%;\n}\n.query_select {\n  border-color: rgb(229, 229, 229);\n  background-color: rgb(255, 255, 255);\n  border-radius: 4px;\n  box-sizing: border-box;\n  flex: 1;\n  width: 100%;\n  line-height: 2;\n  font-size: 14px;\n  height: 2.4em;\n  min-height: 2.4em;\n  display: block;\n  outline: none;\n}\n\n.query_option {\n  width: 100%;\n}\n\n.btn_add_img {\n  color: #d3d3d3;\n  text-align: center;\n  border: 1px solid #eee;\n  height: 5rem;\n  width: 5rem;\n  position: relative;\n}\n.btn_add_img text {\n  font-size: 35px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.form_button {\n  padding-bottom: 15px;\n  display: flex;\n}\n.form_button button {\n  width: 40%;\n}\n.query_select {\n  border-color: rgb(229, 229, 229);\n  background-color: rgb(255, 255, 255);\n  border-radius: 4px;\n  box-sizing: border-box;\n  flex: 1;\n  width: 100%;\n  line-height: 2;\n  font-size: 14px;\n  height: 2.4em;\n  min-height: 2.4em;\n  display: block;\n  outline: none;\n}\n\n.query_option {\n  width: 100%;\n}\n\n.btn_add_img {\n  color: #d3d3d3;\n  text-align: center;\n  border: 1px solid #eee;\n  height: 5rem;\n  width: 5rem;\n  position: relative;\n}\n.btn_add_img text {\n  font-size: 35px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n/*新样式*/\n.uni-forms {\n  padding-top: 1rem;\n}\n.uni-forms-item {\n  padding: 6px 10px;\n  background: #f8f6fc;\n}\n.uni-forms .is-input-border {\n  border: 0;\n}\n.container {\n  -webkit-box-shadow: 0px 0px 0px #888888;\n  box-shadow: 0px 0px 0px #888888;\n}\n.form_button .primary_btn {\n  background-color: #22b8b8;\n  color: #ffffff;\n}\n.file-url {\n  font-size: 12px;\n  color: #ccc;\n}\n.diy_field,\n.file-url {\n  position: relative;\n}\n.close_ {\n  position: absolute;\n  top: -18px;\n  left: -7px;\n  font-size: 22px;\n  color: #22b8b8;\n  font-weight: 600;\n}\n</style>\n","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./view.vue?vue&type=style&index=0&id=d7e7b0f0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./view.vue?vue&type=style&index=0&id=d7e7b0f0&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716129025912\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}