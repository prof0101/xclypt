{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/user/info.vue?19f7","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/user/info.vue?9a20","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/user/info.vue?2f8b","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/user/info.vue?27a6","uni-app:///pages/user/info.vue","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/user/info.vue?0245","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/user/info.vue?540d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","data","oauth","signIn","user_group","href","display_input","display_name","focus_input","form","source_table_url","created","methods","change_avatar","uni","count","sizeType","sourceType","success","url","filePath","name","header","formData","_self","avatar","uploadTask","console","error","change_nickname","save_nickname","nickname","get_source_table_url","json","json_sub"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAoyB,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC2FxzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;EACAC;IACA;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;MACAC;QACAC;QACAC;QAAA;QACAC;QAAA;QACAC;UACA;UACA;YACAC;YACAC;YACAC;YACAC;cACA;YACA;YACAC;YACAL;cACA;;cAEA;cACA;cACA;cACAM,YACA,gDACA;gBACAC;cACA,GACA;gBACAD;cACA,EACA;YACA;UACA;UAEAE;YACAF;YAEAG,YACA,8CACA;UACA;QACA;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACA,WACA,0CACA;QACAC;MACA,GACA;QACA;QACA;QACA;QACA;MACA,EACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA5B;gBAAA;gBAAA,OACA;cAAA;gBAAA6B;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA,YACA,WACAA,+BACA,sBACA,iCACA;cAAA;gBALAC;gBAMA;kBACA,0BACA,YACAD,+BACA,WACAA,+BACA,MACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjNA;AAAA;AAAA;AAAA;AAAqoC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACAzpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/info.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/info.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./info.vue?vue&type=template&id=4b89896e&\"\nvar renderjs\nimport script from \"./info.vue?vue&type=script&lang=js&\"\nexport * from \"./info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./info.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/info.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=template&id=4b89896e&\"","var components\ntry {\n  components = {\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-easyinput/uni-easyinput\" */ \"@/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$fullImgUrl(_vm.user.avatar)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page_user\" id=\"user_info\">\n    <!-- 信息修改模块(开始) -->\n\n    <view class=\"\">\n      <view class=\"item_info\">\n        <view class=\"flex_box\">\n          <view>\n            <text>头像</text>\n          </view>\n          <view class=\"right_wrap\">\n            <image\n              style=\"width: 3rem; height: 3rem\"\n              :src=\"$fullImgUrl(user.avatar)\"\n              mode=\"scaleToFill\"\n            ></image>\n          </view>\n        </view>\n      </view>\n      <view class=\"item_info\" style=\"margin-bottom: 5rem\">\n        <view class=\"flex_box\" style=\"position: relative\">\n          <view>\n            <text>昵称</text>\n          </view>\n          <view class=\"right_wrap\" :style=\"'display:' + display_name + ';'\">\n            <text style=\"font-size: 1.2rem; color: var(--color_grey)\">{{\n              user.nickname\n            }}</text>\n          </view>\n\n          <view\n            class=\"input_nickname\"\n            :style=\"'display:' + display_input + ';'\"\n          >\n            <view class=\"btn_save\" @click=\"save_nickname()\">保存</view>\n            <uni-easyinput\n              type=\"text\"\n              id=\"nickname\"\n              v-model=\"form.nickname\"\n              :focus=\"focus_input\"\n            />\n          </view>\n        </view>\n      </view>\n      <!--      <view @click=\"change_avatar()\" class=\"item_info\">-->\n      <!--        <view class=\"flex_box\" style=\"height: 1rem; font-size: 0.8rem\">-->\n      <!--          <view>-->\n      <!--            <text>修改头像</text>-->\n      <!--          </view>-->\n      <!--          <view class=\"right_wrap\">-->\n      <!--            <uni-icons class=\"forward\" type=\"forward\" size=\"20\"></uni-icons>-->\n      <!--          </view>-->\n      <!--        </view>-->\n      <!--      </view>-->\n      <!--      <view @click=\"change_nickname()\" class=\"item_info\">-->\n      <!--        <view class=\"flex_box\" style=\"height: 1rem; font-size: 0.8rem\">-->\n      <!--          <view>-->\n      <!--            <text>修改昵称</text>-->\n      <!--          </view>-->\n      <!--          <view class=\"right_wrap\">-->\n      <!--            <uni-icons class=\"forward\" type=\"forward\" size=\"20\"></uni-icons>-->\n      <!--          </view>-->\n      <!--        </view>-->\n      <!--      </view>-->\n      <navigator url=\"./password\" class=\"item_info\">\n        <view class=\"flex_box\" style=\"height: 1rem; font-size: 0.8rem\">\n          <view>\n            <text>修改密码</text>\n          </view>\n          <view class=\"right_wrap\">\n            <uni-icons class=\"forward\" type=\"forward\" size=\"20\"></uni-icons>\n          </view>\n        </view>\n      </navigator>\n      <navigator :url=\"source_table_url\" class=\"item_info\">\n        <view class=\"flex_box\" style=\"height: 1rem; font-size: 0.8rem\">\n          <view>\n            <text>修改资料</text>\n          </view>\n          <view class=\"right_wrap\">\n            <uni-icons class=\"forward\" type=\"forward\" size=\"20\"></uni-icons>\n          </view>\n        </view>\n      </navigator>\n    </view>\n\n    <!-- 信息修改模块(结束) --></view\n  >\n</template>\n\n<script>\nimport mixin from '@/libs/mixins/page.js'\nexport default {\n  mixins: [mixin],\n  data() {\n    return {\n      // 登录权限\n      oauth: {\n        signIn: true,\n        user_group: [],\n      },\n      href: 'https://uniapp.dcloud.io/component/README?id=uniui',\n      // 输入框是否隐藏\n      display_input: 'none',\n      display_name: 'block',\n      // 输入聚焦\n      focus_input: false,\n      // 有昵称的表格对象\n      form: {},\n      source_table_url: '',\n    }\n  },\n  created() {\n    this.get_source_table_url()\n  },\n  methods: {\n    change_avatar() {\n      var _self = this\n      // 选择图像方法\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'], //从相册选择\n        success: function (res) {\n          const tempFilePaths = res.tempFilePaths\n          const uploadTask = uni.uploadFile({\n            url: _self.$fullUrl('/api/user/upload?'),\n            filePath: tempFilePaths[0],\n            name: 'file',\n            header: {\n              'x-auth-token': _self.$store.state.user.token,\n            },\n            formData: {},\n            success: function (uploadFileRes) {\n              var filename = JSON.parse(uploadFileRes.data).result.url\n\n              // 改用户表中的头像\n              // var avatar = filename\n              var avatar = JSON.parse(uploadFileRes.data).result.url\n              _self.$post(\n                '~/api/user/set?user_id=' + _self.user.user_id,\n                {\n                  avatar,\n                },\n                (res) => {\n                  _self.user.avatar = filename\n                }\n              )\n            },\n          })\n\n          uploadTask.onProgressUpdate(function (res) {\n            _self.percent = res.progress\n\n            console.log(\n              '预期需要上传的数据总长度' + res.totalBytesExpectedToSend\n            )\n          })\n        },\n        error: function (e) {},\n      })\n    },\n    // 跳出修改昵称输入框\n    change_nickname() {\n      this.display_input = 'flex'\n      this.display_name = 'none'\n      this.focus_input = true\n    },\n    // 保存昵称修改\n    save_nickname() {\n      var user = this.user\n      var nickname = this.form.nickname\n      this.$post(\n        '~/api/user/set?user_id=' + user.user_id,\n        {\n          nickname,\n        },\n        (res) => {\n          this.focus_input = false\n          this.display_input = 'none'\n          this.display_name = 'block'\n          this.user.nickname = nickname\n        }\n      )\n    },\n    async get_source_table_url() {\n      let user_group = this.$store.state.user.user_group\n      var json = await this.$get('~/api/user_group/get_obj?name=' + user_group)\n      if (json.result && json.result.obj) {\n        if (json.result.obj.source_table) {\n          var json_sub = await this.$get(\n            '~/api/' +\n              json.result.obj.source_table +\n              '/get_obj?user_id=' +\n              this.$store.state.user.user_id\n          )\n          if (json_sub.result && json_sub.result.obj) {\n            this.source_table_url =\n              '/pages/' +\n              json.result.obj.source_table +\n              '/view?' +\n              json.result.obj.source_field +\n              '=' +\n              json_sub.result.obj[json.result.obj.source_field]\n          }\n        }\n      }\n    },\n  },\n}\n</script>\n\n<style>\n.page_user {\n}\n\n.item_info {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.8rem 0.8rem;\n  border-bottom: 1px solid #eee;\n  background-color: #fff;\n}\n\n.flex_box {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 90%;\n  height: 2rem;\n}\n\n.right_wrap {\n  overflow: hidden;\n}\n\n.forward {\n  width: 10%;\n  color: #dbdbdb !important;\n}\n\n.input_nickname {\n  position: absolute;\n  top: 50%;\n  right: 0;\n  transform: translate(0, -50%);\n  display: flex;\n  align-items: center;\n  width: 10rem;\n}\n\n.input_nickname #nickname {\n  width: 100%;\n  border-bottom: 1px solid #000;\n}\n\n.input_nickname .btn_save {\n  width: 4rem;\n  text-align: center;\n  height: 1.5rem;\n  line-height: 1.5rem;\n  border: 1px solid var(--color_grey);\n  border-radius: 5px;\n  margin-right: 4px;\n}\n</style>\n","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./info.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716129025263\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}