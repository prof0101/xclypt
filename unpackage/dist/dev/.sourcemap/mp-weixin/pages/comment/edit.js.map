{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/comment/edit.vue?823c","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/comment/edit.vue?10f7","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/comment/edit.vue?7fd8","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/comment/edit.vue?56b8","uni-app:///pages/comment/edit.vue","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/comment/edit.vue?fa8d","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/comment/edit.vue?c04e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","components","data","oauth","signIn","user_group","form","content","color","r","g","b","a","isEdit","fontColor","formats","readOnly","placeholder","editorHeight","keyboardHeight","isIOS","editoValue","query","nickname","eValue","onLoad","_self","methods","cancel","open","hideKey","uni","confirm","e","detail","readOnlyChange","onEditorReady","createSelectorQuery","select","context","exec","undo","redo","blur","format","name","value","onStatusChange","insertDivider","success","store","url","clear_","removeFormat","insertDate","text","insertImage","count","that","src","id","role","width","blobToDataURI","reader","callback","publish","obj_url","body","user_id","avatar","sensitiveWords"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAoyB,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkBxzB;;;;;;;;;;;;;;;;;;;;;;;AAEA;AAAA,eAEA;EACAC;EACAC;IACA;EACA;EACAC;IACA;MACA;MACAC;QACAC;QACAC;MACA;MACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAb;MACAc;MACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACAC;EACA;EAEAC;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACAC;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAAA,OACAC;cAAA;gBAAA;gBACA;kBACAC;oBACA1B;kBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA2B;MACA;IACA;IACAC;MAAA;MACAL,IACAM,sBACAC,kBACAC;QACA;MACA,GACAC;IACA;IACAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;QAAAC;QAAAC;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACAC;MACA;IACA;IAEAC;MACA;QACAD;UACAhB,0BACAF;YACA7B;UACA,KACA6B;YACAoB;UACA;QACA;MACA;IACA;IAEAC;MACA;QACAH;MACA;IACA;IAEAI;MACA;IACA;IAEAC;MACA;MACA;MACA;QACAC;MACA;IACA;IAEAC;MACA;MACAzB;QACA0B;QACAR;UACAS;YACAhC;cACAiC;cACAzD;gBACA0D;gBACAC;cACA;cACAC;cACAb;YACA;UACA;QACA;MACA;IACA;IACAc;MACA;MACAC;MACAA;QACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA3D;gBACA4D;gBACAC;kBACAC;kBACA9C;kBACA+C;kBACA/D;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAgE;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;cAAA;gBAIA;kBACA;oBACA;oBAEA;oBACA;kBACA;oBACA;kBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/NA;AAAA;AAAA;AAAA;AAA6pC,CAAgB,unCAAG,EAAC,C;;;;;;;;;;;ACAjrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/comment/edit.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/comment/edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=5fed9bb3&scoped=true&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&id=5fed9bb3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fed9bb3\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/comment/edit.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=template&id=5fed9bb3&scoped=true&\"","var components\ntry {\n  components = {\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-easyinput/uni-easyinput\" */ \"@/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"page_comment\" id=\"comment_edit\">\n    <!-- 评论区 -->\n    <view class=\"comment_auth\" v-if=\"query.nickname\">\n      对 {{ query.nickname }} 回复...\n    </view>\n    <uni-easyinput\n      type=\"textarea\"\n      class=\"e-value\"\n      v-model=\"eValue\"\n      style=\"border: 1px solid #e5e5e5\"\n    ></uni-easyinput>\n    <view class=\"btn_publish\" @click=\"publish()\" type=\"default\">发表</view>\n    <!-- /评论区 -->\n  </view>\n</template>\n\n<script>\nimport mixin from '@/libs/mixins/page.js'\nimport tColorPicke from '@/components/diy/t-color-picker.vue'\nvar _self\n\nexport default {\n  mixins: [mixin],\n  components: {\n    't-color-picker': tColorPicke,\n  },\n  data() {\n    return {\n      // 登录权限\n      oauth: {\n        signIn: true,\n        user_group: [],\n      },\n      form: {\n        content: 'ceshi',\n      },\n      color: {\n        r: 255,\n        g: 0,\n        b: 0,\n        a: 0.6,\n      },\n      isEdit: false,\n      fontColor: '#000',\n      formats: {},\n      readOnly: false,\n      placeholder: '开始输入...',\n      editorHeight: 300,\n      keyboardHeight: 0,\n      isIOS: false,\n      content: '',\n      editoValue: '',\n      query: {\n        nickname: '',\n      },\n      eValue: '',\n    }\n  },\n  onLoad() {\n    _self = this\n  },\n\n  methods: {\n    cancel() {\n      this.isEdit = false\n    },\n    open() {\n      this.$refs.colorPicker.open()\n      this.isEdit = true\n      // uni.hideKeyboard();\n    },\n    hideKey() {\n      uni.hideKeyboard()\n    },\n    async confirm(e) {\n      this.isEdit = false\n      this.fontColor = await e.hex\n      this.onStatusChange({\n        detail: {\n          color: e.hex,\n        },\n      })\n      this.$forceUpdate()\n    },\n    readOnlyChange() {\n      this.readOnly = !this.readOnly\n    },\n    onEditorReady() {\n      uni\n        .createSelectorQuery()\n        .select('#editor')\n        .context((res) => {\n          this.editorCtx = res.context\n        })\n        .exec()\n    },\n    undo() {\n      this.editorCtx.undo()\n    },\n\n    redo() {\n      this.editorCtx.redo()\n    },\n\n    blur() {\n      this.editorCtx.blur()\n    },\n\n    format(e) {\n      // this.hideKey();\n      let { name, value } = e.target.dataset\n      if (!name) return //\n      this.editorCtx.format(name, value)\n    },\n\n    onStatusChange(e) {\n      this.formats = e.detail\n    },\n\n    insertDivider() {\n      this.editorCtx.insertDivider({\n        success: function () {},\n      })\n    },\n\n    store(e) {\n      this.editorCtx.getContents({\n        success: function (res) {\n          e.currentTarget.id == 1\n            ? uni.setClipboardData({\n                data: res.html,\n              })\n            : uni.navigateTo({\n                url: `../preview/preview?rich=${encodeURIComponent(res.html)}`,\n              })\n        },\n      })\n    },\n\n    clear_() {\n      this.editorCtx.clear({\n        success: function (res) {},\n      })\n    },\n\n    removeFormat() {\n      this.editorCtx.removeFormat()\n    },\n\n    insertDate() {\n      const date = new Date()\n      const formatDate = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`\n      this.editorCtx.insertText({\n        text: formatDate,\n      })\n    },\n\n    insertImage() {\n      const that = this\n      uni.chooseImage({\n        count: 1,\n        success: function (res) {\n          that.blobToDataURI(res.tempFiles[0], function (result) {\n            _self.editorCtx.insertImage({\n              src: result,\n              data: {\n                id: 'abcd',\n                role: 'god',\n              },\n              width: '80%',\n              success: function () {},\n            })\n          })\n        },\n      })\n    },\n    blobToDataURI(blob, callback) {\n      let reader = new FileReader()\n      reader.readAsDataURL(blob)\n      reader.onload = function (e) {\n        callback(e.target.result)\n      }\n    },\n    // 发送按钮\n    async publish() {\n      var content = this.eValue\n      var obj_url = getCurrentPages()[getCurrentPages().length - 1]\n      var body = Object.assign({}, obj_url.options, {\n        user_id: this.$store.state.user.user_id,\n        nickname: this.$store.state.user.nickname,\n        avatar: this.$store.state.user.avatar,\n        content,\n      })\n\n      var sensitiveWords = await this.filterSensitiveWords(body.content)\n      if (sensitiveWords.length > 0) {\n        this.$toast('当前消息中包含敏感词: ' + sensitiveWords.join(','))\n        return\n      }\n\n      this.$post('~/api/comment/add?', body, (res) => {\n        if (res.result) {\n          this.$toast(res.result, 'success')\n\n          var url = this.$redirect()\n          this.$nav(url)\n        } else if (res.error) {\n          this.$toast(res.error.message, 'error')\n        }\n      })\n      //插入一条留言\n      // this.$post('~/api/message/add?', body, (res) => {\n      // \tif (res.result) {\n      // \t\tthis.$toast(res.result, 'success');\n      // \t\tvar url = this.$redirect();\n      // \t\tthis.$nav(url);\n      // \t} else if (res.error) {\n      // \t\tthis.$toast(res.error.message, 'error');\n      // \t}\n      // })\n    },\n  },\n}\n</script>\n\n<style scoped>\n@import '/static/css/editor.css';\n\n#editor {\n  background-color: #fff;\n}\n\n.comment_auth {\n  padding-left: 10px;\n}\n\n.btn_publish {\n  padding: 0.5rem 0.25rem;\n  font-weight: 600;\n  font-size: 1.25rem;\n  border-radius: 2rem;\n  background-color: var(--color_primary);\n  color: #fff;\n  text-align: center;\n  margin: 0 1rem;\n  margin-top: 1rem;\n}\n\n.e-value {\n  margin-top: 30px;\n  width: 80%;\n  margin-left: 10%;\n}\n</style>\n","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&id=5fed9bb3&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./edit.vue?vue&type=style&index=0&id=5fed9bb3&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716129031797\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}