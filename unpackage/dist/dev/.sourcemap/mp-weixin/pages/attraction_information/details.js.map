{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/attraction_information/details.vue?936f","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/attraction_information/details.vue?98a4","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/attraction_information/details.vue?bb01","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/attraction_information/details.vue?99b0","uni-app:///pages/attraction_information/details.vue","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/attraction_information/details.vue?24b6","webpack:///C:/Users/Administrator/Documents/nodejs-country/client_home/pages/attraction_information/details.vue?c434"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","components","list_comment","bar_title","form_editor","data","url_get_obj","field","query","attraction_information_id","obj","merchant_users","merchant_name","attraction_name","scenic_spot_pictures","admission_price","tourist_attraction_phone_number","attraction_address","introduction_to_scenic_spots","hits","praise_len","praise","state_praise","collect","state_collect","bar_url","list_user_merchant_users","created","mounted","methods","get_praise","source_table","source_field","source_id","console","user_id","change_praise","_this","get_collect","change_collect","get_comment","orderby","reply_to_id","getApp","o","add_reply","idx","resolve","add_hits","get_obj_after","get_list_user_merchant_users","json","get_user_merchant_users","ret"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AAC0M;AAC1M,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClEA;AAAA;AAAA;AAAA;AAAuyB,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;AC8M3zB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;MACA;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAX;MACA;MACA;MACAY;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAtB;MACA;MACAC;MACA;MACAsB;MACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;EACAC;IACA;AACA;AACA;AACA;AACA;IACAC;MAAA;MACA;MAEA;MAEA,UACA,uBACA;QACAC;QACAC;QACAC;MACA,GACA;QACA;UACA;UACA;QACA;UACA;UACAC;QACA;MACA,EACA;MAEA,UACA,uBACA;QACAH;QACAC;QACAC;QACAE;MACA,GACA;QACA;UACA;QACA;UACA;UACAD;QACA;MACA,EACA;IACA;IAEA;AACA;AACA;IACAE;MAAA;MACA;MAEA;QACAL;QACAC;QACAC;QACAE;MACA;MAEA;MACAE;MACA;MACA;QACA;QACA;UACA;YACA;YACA,aACA,gEACAA,wCACA;cACAjB;YACA,GACA;cACA;gBACAiB;cACA;gBACAH;cACA;YACA,EACA;YACA;UACA;YACA;YACAA;UACA;QACA;MACA;QACA;QACA;UACA;YACA;YACA,aACA,gEACAG,wCACA;cACAjB;YACA,GACA;cACA;gBACAiB;cACA;gBACAH;cACA;YACA,EACA;YACA;UACA;YACA;YACAA;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAI;MAAA;MACA;MAEA;QACAP;QACAC;QACAC;QACAE;MACA;MAEA;QACA;UACA;UACA;QACA;UACAD;QACA;MACA;IACA;IAEA;AACA;AACA;IACAK;MAAA;MACA;MAEA;QACAR;QACAC;QACAC;QACAE;MACA;;MAEA;MACA;QACA;QACA;UACA;YACA;UACA;YACA;YACAD;UACA;QACA;MACA;QACA;QACA1B;QACAA;QACA;UACA;YACA;UACA;YACA;YACA0B;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAM;MAAA;MACA;QACAT;QACAC;QACAC;QACAQ;QACAC;MACA;MACA,UACAC,qDACAnC,OACA;QACA;UACA;UACAN;YACA0C;UACA;UACA;YACA;UACA;QACA;MACA,EACA;IACA;IACA;AACA;AACA;AACA;IACAC;MAAA;MACA;QAAA,2BACAC;UACA;UACA,YACAH,qDACA;YACAZ;YACAC;YACAC;YACAQ;YACAC;UACA,GACA;YACA;cACAhC;YACA;UACA,EACA;QAAA;QAhBA;UAAA;QAiBA;QACAqC;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACAtC;MACA;MACA,WACA,gEACAA,kCACA;QACAS;MACA,GACA;QACA;UACA;YACAY;YACAC;YACAC;YACAE;UACA;UACA;QACA;UACAD;QACA;MACA,EACA;IACA;IAEA;AACA;AACA;AACA;IACAe;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;kBACA;gBACA;kBACAjB;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAkB;MACA;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;ACljBA;AAAA;AAAA;AAAA;AAAwoC,CAAgB,kmCAAG,EAAC,C;;;;;;;;;;;ACA5pC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/attraction_information/details.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/attraction_information/details.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./details.vue?vue&type=template&id=25696ec0&\"\nvar renderjs\nimport script from \"./details.vue?vue&type=script&lang=js&\"\nexport * from \"./details.vue?vue&type=script&lang=js&\"\nimport style0 from \"./details.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/attraction_information/details.vue\"\nexport default component.exports","export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=template&id=25696ec0&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$check_field(\"get\", \"merchant_users\")\n  var m1 = m0 ? _vm.get_user_merchant_users(_vm.obj[\"merchant_users\"]) : null\n  var m2 = _vm.$check_field(\"get\", \"merchant_name\")\n  var m3 = _vm.$check_field(\"get\", \"attraction_name\")\n  var m4 = _vm.$check_field(\"get\", \"scenic_spot_pictures\")\n  var m5 = m4 ? _vm.$fullUrl(_vm.obj[\"scenic_spot_pictures\"]) : null\n  var m6 = _vm.$check_field(\"get\", \"admission_price\")\n  var m7 = _vm.$check_field(\"get\", \"tourist_attraction_phone_number\")\n  var m8 = _vm.$check_field(\"get\", \"attraction_address\")\n  var m9 = _vm.$check_field(\"get\", \"introduction_to_scenic_spots\")\n  var m10 = _vm.$check_action(\"/ticket_orders/edit\", \"add\")\n  var m11 = _vm.$check_action(\"/comment/list\", \"add\")\n  var m12 = _vm.$check_action(\"/collect/list\", \"add\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n        m8: m8,\n        m9: m9,\n        m10: m10,\n        m11: m11,\n        m12: m12,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=script&lang=js&\"","<template>\n  <view\n    class=\"page_attraction_information diy_detail diy_detail--new\"\n    id=\"attraction_information_details\"\n  >\n    <view class=\"warp\">\n      <view class=\"container-fluid\">\n        <view class=\"row\">\n          <view\n            v-if=\"$check_field('get', 'merchant_users')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>商家用户</span>\n              </view>\n              <view class=\"diy_field diy_uid\">\n                {{ get_user_merchant_users(obj['merchant_users']) }}\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'merchant_name')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>商家名称</span>\n              </view>\n              <view class=\"diy_field diy_text\">\n                <span>\n                  {{ obj['merchant_name'] }}\n                </span>\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'attraction_name')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>景点名称</span>\n              </view>\n              <view class=\"diy_field diy_text\">\n                <span>\n                  {{ obj['attraction_name'] }}\n                </span>\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'scenic_spot_pictures')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>景点图片</span>\n              </view>\n              <view class=\"diy_field diy_img\">\n                <img :src=\"$fullUrl(obj['scenic_spot_pictures'])\" />\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'admission_price')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>门票价格</span>\n              </view>\n              <view class=\"diy_field diy_number\">\n                <span>\n                  {{ obj['admission_price'] }}\n                </span>\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'tourist_attraction_phone_number')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>景点电话</span>\n              </view>\n              <view class=\"diy_field diy_phone\">\n                <span>\n                  {{ obj['tourist_attraction_phone_number'] }}\n                </span>\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'attraction_address')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>景点地址</span>\n              </view>\n              <view class=\"diy_field diy_desc\">\n                <span>\n                  {{ obj['attraction_address'] }}\n                </span>\n              </view>\n            </view>\n          </view>\n          <view\n            v-if=\"$check_field('get', 'introduction_to_scenic_spots')\"\n            class=\"col-12 col-6\"\n          >\n            <view class=\"view\">\n              <view class=\"diy_title\">\n                <span>景点简介</span>\n              </view>\n              <view class=\"diy_field diy_desc\">\n                <span>\n                  {{ obj['introduction_to_scenic_spots'] }}\n                </span>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      <view class=\"row\">\n        <view class=\"col-12 col-md-4 view\">\n          <span>点赞{{ obj['praise_len'] }}</span>\n        </view>\n\n        <view class=\"col-12 col-md-4 view\">\n          <span>点击数{{ obj['hits'] }}</span>\n        </view>\n      </view>\n    </view>\n\n    <!-- 评论区标题 -->\n    <view class=\"bar_title comment_title\">\n      <view class=\"title\">\n        <navigator :url=\"bar_url\">\n          <text>\n            {{ bar_title }}\n          </text>\n        </navigator>\n      </view>\n    </view>\n\n    <!-- 评论区列表 -->\n    <list_comment :list=\"list_comment\"></list_comment>\n\n    <view class=\"warp\">\n      <view class=\"container-fluid container-fluid-comment--new\">\n        <view class=\"row\">\n          <view class=\"col\">\n            <button\n              type=\"button\"\n              class=\"btn btn-primary\"\n              v-if=\"$check_action('/ticket_orders/edit', 'add')\"\n              @click=\"to_form('/pages/ticket_orders/edit')\"\n            >\n              <span>门票预订</span>\n            </button>\n\n            <!--\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" @click=\"cancel()\">返回</button>-->\n\n            <button\n              v-if=\"user_group != '游客'\"\n              type=\"button\"\n              class=\"btn btn-primary\"\n              @click=\"change_praise()\"\n            >\n              <span>点赞</span>\n            </button>\n\n            <navigator\n              v-if=\"$check_action('/comment/list', 'add')\"\n              class=\"btn link\"\n              :url=\"\n                '/pages/comment/edit?source_table=attraction_information&source_field=attraction_information_id&source_id=' +\n                obj['attraction_information_id']\n              \"\n            >\n              评论\n            </navigator>\n\n            <navigator\n              v-if=\"$check_action('/collect/list', 'add')\"\n              @click=\"change_collect()\"\n              class=\"btn publish_box\"\n            >\n              <uni-icons type=\"heart\"></uni-icons>\n              <text>收藏</text>\n            </navigator>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport list_comment from '@/components/diy/list_comment.vue'\nimport bar_title from '@/components/diy/bar_title.vue'\nimport form_editor from '@/components/diy/form_editor.vue'\n\nimport mixin from '@/libs/mixins/page.js'\nexport default {\n  mixins: [mixin],\n  components: {\n    list_comment,\n    bar_title,\n    form_editor,\n  },\n  data() {\n    return {\n      url_get_obj: '~/api/attraction_information/get_obj?',\n      field: 'attraction_information_id',\n      query: {\n        attraction_information_id: 0,\n      },\n      // 商品详情初始化\n      obj: {\n        merchant_users: 0,\n        merchant_name: '',\n        attraction_name: '',\n        scenic_spot_pictures: '',\n        admission_price: 0,\n        tourist_attraction_phone_number: '',\n        attraction_address: '',\n        introduction_to_scenic_spots: '',\n        hits: 0,\n        praise_len: 0,\n        attraction_information_id: 0,\n      },\n      // 点赞\n      praise: 0,\n      // 点赞状态\n      state_praise: false,\n      // 收藏\n      collect: 0,\n      // 收藏状态\n      state_collect: false,\n      // 评论列表初始化\n      list_comment: [],\n      // 评论bar标题\n      bar_title: '评论区',\n      // 评论bar的链接\n      bar_url: '',\n      // 用户列表\n      list_user_merchant_users: [],\n    }\n  },\n  created() {\n    this.get_list_user_merchant_users()\n  },\n  mounted() {},\n  methods: {\n    /**\n     * 获取点赞\n     * @param {Object}\nobj\n     */\n    get_praise(obj) {\n      var user_id = this.user.user_id\n\n      this.obj.praise_len = 0\n\n      this.$get(\n        '~/api/praise/count?',\n        {\n          source_table: 'attraction_information',\n          source_field: 'attraction_information_id',\n          source_id: obj['attraction_information_id'],\n        },\n        (res) => {\n          if (res.result || res.result === 0) {\n            this.praise = res.result\n            this.obj.praise_len = res.result\n          } else if (res.error) {\n            this.$toast(res.error.message)\n            console.error(res.error)\n          }\n        }\n      )\n\n      this.$get(\n        '~/api/praise/count?',\n        {\n          source_table: 'attraction_information',\n          source_field: 'attraction_information_id',\n          source_id: obj['attraction_information_id'],\n          user_id,\n        },\n        (res) => {\n          if (res.result || res.result === 0) {\n            this.state_praise = res.result ? true : false\n          } else if (res.error) {\n            this.$toast(res.error.message)\n            console.error(res.error)\n          }\n        }\n      )\n    },\n\n    /**\n     * 改变点赞数\n     */\n    change_praise(obj) {\n      var user_id = this.user.user_id\n\n      var query = {\n        source_table: 'attraction_information',\n        source_field: 'attraction_information_id',\n        source_id: this.obj['attraction_information_id'],\n        user_id,\n      }\n\n      var _this = this\n      _this.obj.praise_len = parseInt(_this.obj.praise_len)\n      // 点赞状态\n      if (this.state_praise) {\n        this.state_praise = false\n        this.$get('~/api/praise/del?', query, (res) => {\n          if (res.result) {\n            var praise_len = _this.obj.praise_len - 1\n            this.$post(\n              '~/api/attraction_information/set?attraction_information_id=' +\n                _this.obj['attraction_information_id'],\n              {\n                praise_len,\n              },\n              (res) => {\n                if (res.result) {\n                  _this.obj.praise_len = praise_len\n                } else if (res.error) {\n                  console.error(res.error)\n                }\n              }\n            )\n            this.$toast('取消点赞')\n          } else if (res.error) {\n            this.$toast(res.error.message)\n            console.error(res.error)\n          }\n        })\n      } else {\n        this.state_praise = true\n        this.$post('~/api/praise/add?', query, (res) => {\n          if (res.result) {\n            var praise_len = _this.obj.praise_len + 1\n            this.$post(\n              '~/api/attraction_information/set?attraction_information_id=' +\n                _this.obj['attraction_information_id'],\n              {\n                praise_len,\n              },\n              (res) => {\n                if (res.result) {\n                  _this.obj.praise_len = praise_len\n                } else if (res.error) {\n                  console.error(res.error)\n                }\n              }\n            )\n            this.$toast('点赞成功')\n          } else if (res.error) {\n            this.$toast(res.error.message)\n            console.error(res.error)\n          }\n        })\n      }\n    },\n\n    /**\n     * 初始化收藏状态\n     * @param {Object} obj\n     */\n    get_collect(obj) {\n      var user_id = this.user.user_id\n\n      var query = {\n        source_table: 'attraction_information',\n        source_field: 'attraction_information_id',\n        source_id: obj['attraction_information_id'],\n        user_id,\n      }\n\n      this.$get('~/api/collect/count?', query, (res) => {\n        if (res.result || res.result === 0) {\n          var bl = res.result ? true : false\n          this.state_collect = bl\n        } else if (res.error) {\n          console.error(res.error)\n        }\n      })\n    },\n\n    /**\n     * 改变收藏状态\n     */\n    change_collect() {\n      var user_id = this.user.user_id\n\n      var query = {\n        source_table: 'attraction_information',\n        source_field: 'attraction_information_id',\n        source_id: this.obj['attraction_information_id'],\n        user_id,\n      }\n\n      // 收藏状态\n      if (this.state_collect) {\n        this.state_collect = false\n        this.$get('~/api/collect/del?', query, (res) => {\n          if (res.result) {\n            this.$toast('取消收藏')\n          } else if (res.error) {\n            this.$toast(res.error.message)\n            console.error(res.error)\n          }\n        })\n      } else {\n        this.state_collect = true\n        query.title = this.obj.attraction_name\n        query.img = this.obj.scenic_spot_pictures\n        this.$post('~/api/collect/add?', query, (res) => {\n          if (res.result) {\n            this.$toast('收藏成功')\n          } else if (res.error) {\n            this.$toast(res.error.message)\n            console.error(res.error)\n          }\n        })\n      }\n    },\n\n    /**\n     * 获取评论\n     * @param {Object} obj\n     */\n    get_comment(obj) {\n      var query = {\n        source_table: 'attraction_information',\n        source_field: 'attraction_information_id',\n        source_id: obj['attraction_information_id'],\n        orderby: 'create_time desc',\n        reply_to_id: '0',\n      }\n      this.$get(\n        getApp().globalData.host + '/api/comment/get_list?',\n        query,\n        (json) => {\n          if (json.result) {\n            var list_comment = json.result.list\n            list_comment.map((o) => {\n              o.list_reply = []\n            })\n            this.add_reply(obj, list_comment).then((list) => {\n              this.list_comment = list\n            })\n          }\n        }\n      )\n    },\n    /**\n     * @param { Array } list 评论列表\n     * 添加回复到评论列表\n     */\n    add_reply(obj, list) {\n      return new Promise((resolve) => {\n        for (let idx = 0; idx < list.length; idx++) {\n          const obj = list[idx]\n          this.$get(\n            getApp().globalData.host + '/api/comment/get_list?',\n            {\n              source_table: 'attraction_information',\n              source_field: 'attraction_information_id',\n              source_id: obj['attraction_information_id'],\n              orderby: 'create_time desc',\n              reply_to_id: obj.comment_id,\n            },\n            (res) => {\n              if (res.result) {\n                obj.list_reply = res.result.list\n              }\n            }\n          )\n        }\n        resolve(list)\n      }).catch((e) => {})\n    },\n\n    /**\n     * 添加访问量\n     */\n    add_hits(obj) {\n      obj['hits'] = obj['hits'] + 1\n      var hits = obj['hits']\n      this.$post(\n        '~/api/attraction_information/set?attraction_information_id=' +\n          obj['attraction_information_id'],\n        {\n          hits,\n        },\n        (res) => {\n          if (res.result) {\n            var body = {\n              source_table: 'attraction_information',\n              source_field: 'attraction_information_id',\n              source_id: this.obj.attraction_information_id,\n              user_id: this.$store.state.user.user_id,\n            }\n            this.$post('~/api/hits/add?', body, (res) => {})\n          } else if (res.error) {\n            console.error(res.error)\n          }\n        }\n      )\n    },\n\n    /**\n     * 获取对象之后\n     * @param {Object} json 结果对象\n     */\n    get_obj_after(json) {\n      // 判断是否获取到数据\n      if (this.obj) {\n        var obj = this.obj\n        // 获取点赞数\n        this.get_praise(obj)\n        // 初始化收藏状态\n        this.get_collect(obj)\n        // 获取评论\n        this.get_comment(obj)\n        // 增加点击数\n        this.add_hits(obj)\n      }\n    },\n\n    /**\n     * 获取商家用户用户列表\n     */\n    async get_list_user_merchant_users() {\n      var json = await this.$get('~/api/user/get_list?user_group=商家用户')\n      if (json.result && json.result.list) {\n        this.list_user_merchant_users = json.result.list\n      } else if (json.error) {\n        console.error(json.error)\n      }\n    },\n    get_user_merchant_users(id) {\n      let obj = this.list_user_merchant_users\n      let ret = ''\n      for (let i = 0; i < obj.length; i++) {\n        if (obj[i].user_id == id) {\n          ret = obj[i].nickname + '-' + obj[i].username\n        }\n      }\n      return ret\n    },\n  },\n}\n</script>\n\n<style>\n.page_goods {\n  padding-bottom: 3rem;\n}\n\n.link {\n  text-align: center;\n  padding: 0.5rem 0;\n  border: 1px solid #dbdbdb;\n  border-radius: 0.5rem;\n}\n\n.buy_wrap {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n\n.dialog {\n  width: 100%;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n  position: fixed;\n  left: 0;\n  top: 0;\n  padding: 20vh 0;\n}\n\n.dialog-content {\n  width: 500upx;\n  height: 60vh;\n  margin: 0 auto;\n  background: #fff;\n  border-radius: 10upx;\n  overflow: hidden;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 5vh;\n  text-align: center;\n}\n.dialog-content span {\n  margin-top: 3vh;\n}\n\n.dialog-close {\n  width: 40upx;\n  height: 40upx;\n  border-radius: 20upx;\n  position: absolute;\n  right: 10upx;\n  top: 10upx;\n  font-size: 26upx;\n  line-height: 40upx;\n  text-align: center;\n}\n\n.dialog-list {\n  padding: 40upx 20upx;\n}\n\nscroll-view {\n  width: 100%;\n  height: 100%;\n}\n\n.show-dialog {\n  animation: 100ms showDialog linear forwards;\n}\n\n.hide-dialog {\n  animation: 100ms hideDialog linear forwards;\n}\n\n@keyframes hideDialog {\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes showDialog {\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n\n/* new style start */\n.diy_detail--new {\n  padding: 5px;\n}\n.diy_detail--new .view {\n  border-bottom: 1px solid #ccc;\n  padding: 8px 0;\n}\n.diy_detail--new .view uni-view {\n  display: inline-block;\n}\n.diy_detail--new .view .diy_title {\n  color: var(--color_primary);\n  margin-right: 5px;\n  vertical-align: top;\n}\n.diy_detail--new .view .diy_img img {\n  width: 100%;\n}\n.diy_detail--new .view .diy_music {\n  vertical-align: text-top;\n}\n.diy_detail--new .bar_title {\n  position: relative;\n  background-color: #fff;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2px;\n  background: var(--color_primary);\n  border-radius: 10px;\n  height: 46px;\n}\n.diy_detail--new .bar_title .title {\n  margin: 0 auto;\n  color: var(--color_white);\n  font-weight: 600;\n}\n.diy_detail--new .container-fluid-comment--new {\n  margin: 10px 0.6rem;\n}\n.diy_detail--new .container-fluid-comment--new .col {\n  display: flex;\n  flex: auto;\n  flex-wrap: wrap;\n  flex-direction: row;\n  margin-left: -10px;\n}\n.diy_detail--new .container-fluid-comment--new .btn {\n  display: inline-block;\n  border: none;\n  background: var(--color_primary);\n  color: #fff;\n  font-size: 16px !important;\n  padding: 2px 12px !important;\n  border-radius: 20px;\n  line-height: inherit;\n  margin-bottom: 5px;\n  margin-left: 10px;\n  margin-right: 0;\n}\n.diy_detail--new .container-fluid-comment--new .btn:after {\n  display: none;\n}\n.diy_detail--new .container-fluid-comment--new .btn .uni-icons {\n  color: #fff !important;\n}\n.diy_detail--new .comment_title {\n  margin-top: 10px;\n}\n/* new style end */\n</style>\n","import mod from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./details.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716129031353\n      var cssReload = require(\"C:/Users/Administrator/Downloads/HBuilderX.3.98.2023112510/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}